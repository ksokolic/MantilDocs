<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.17">
<title data-rh="true">Data Storage | Mantil Docs</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.mantil.com/img/mantil.png"><meta data-rh="true" name="twitter:image" content="https://docs.mantil.com/img/mantil.png"><meta data-rh="true" property="og:url" content="https://docs.mantil.com/Usage/data_storage"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Data Storage | Mantil Docs"><meta data-rh="true" name="description" content="A key consideration when developing applications is choosing the right data storage option. For traditional server-based applications, the most common option is using a relational database. For serverless applications there are some additional things that need to be considered, such as connection management and pricing models. Here we will attempt to give an overview of the current options for serverless data storage and their advantages and disadvantages."><meta data-rh="true" property="og:description" content="A key consideration when developing applications is choosing the right data storage option. For traditional server-based applications, the most common option is using a relational database. For serverless applications there are some additional things that need to be considered, such as connection management and pricing models. Here we will attempt to give an overview of the current options for serverless data storage and their advantages and disadvantages."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.mantil.com/Usage/data_storage"><link data-rh="true" rel="alternate" href="https://docs.mantil.com/Usage/data_storage" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.mantil.com/Usage/data_storage" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.539eb8aa.css">
<link rel="preload" href="/assets/js/runtime~main.2096478b.js" as="script">
<link rel="preload" href="/assets/js/main.a27016fa.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><div class="announcementBar_IbjG" role="banner"><div class="announcementBarPlaceholder_NC_W"></div><div class="announcementBarContent_KsVm">⭐️ If you like Mantil, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/mantil-io/mantil">GitHub</a> ⭐️</div><button type="button" class="clean-btn close announcementBarClose_FG1z" aria-label="Close"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top navbarHideable_aKYr"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Mantil Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo.svg" alt="Mantil Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">MantilDocs</b></a><a class="navbar__item navbar__link navbar__link--active" href="/">Docs</a><a href="https://www.mantil.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Home<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://blog.mantil.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/mantil-io/mantil" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_S7eR toggle_TdHA toggleDisabled_f9M3"><div class="toggleButton_rCf9" role="button" tabindex="-1"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></div><input type="checkbox" class="toggleScreenReader_g2nN" aria-label="Switch between dark and light mode (currently light mode)"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y sidebarWithHideableNavbar_FoYL"><a tabindex="-1" class="sidebarLogo_FJUI" href="/"><img src="/img/logo.svg" alt="Mantil Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo.svg" alt="Mantil Logo" class="themedImage_W2Cr themedImage--dark_oUvU"><b>MantilDocs</b></a><nav class="menu thin-scrollbar menu_SkdO menuWithAnnouncementBar_x19h"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Tutorial Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cli_install">Mantil CLI Installation</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/aws_detailed_setup/aws_credentials">AWS Detailed Setup</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/getting_started">Your First Mantil Project</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/Usage/api">Usage</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Usage/api">Using a Mantil API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Usage/data_storage">Data Storage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Usage/testing">Testing in Mantil Project</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/concepts/node">General Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/api_configuration/env_variables">API Configuration</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/examples">Examples</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/troubleshooting">Support and Troubleshooting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/analytics">Anonymous Analytics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/credits">Credits</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/faq">FAQ</a></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/">🏠</a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link breadcrumbsItemLink_e5ie">Usage</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><a class="breadcrumbs__link breadcrumbsItemLink_e5ie" href="/Usage/data_storage">Data Storage</a></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Data Storage</h1><p>A key consideration when developing applications is choosing the right data storage option. For traditional server-based applications, the most common option is using a relational database. For serverless applications there are some additional things that need to be considered, such as connection management and pricing models. Here we will attempt to give an overview of the current options for serverless data storage and their advantages and disadvantages.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="s3">S3<a class="hash-link" href="#s3" title="Direct link to heading">​</a></h2><p>S3 is Amazon&#x27;s serverless key/value object storage service that offers very high data availability, security, performance and virtually infinite scalability. Some common use cases include:</p><ul><li>storing assets such as images and videos</li><li>backups and archives of infrequently used data</li><li>analytics</li><li>static website hosting</li></ul><p>It is well suited for serverless workflows since it&#x27;s not connection-based and offers an HTTP based interface.</p><p>While S3 is a very cost-effective solution for the use cases mentioned above, it is primarily designed for throughput and cannot replace a traditional database when it comes to latency and complex querying requirements.</p><p>For more information about S3, please refer to the official <a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/Welcome.html" target="_blank" rel="noopener noreferrer">user guide</a>.</p><p>To integrate S3 into your Mantil project, you can import the <a href="https://github.com/mantil-io/mantil.go" target="_blank" rel="noopener noreferrer">mantil.go</a> package and use the <a href="https://github.com/mantil-io/mantil.go/blob/845476e8b2dae9333158fab6a48c7779423841a9/s3.go#L47" target="_blank" rel="noopener noreferrer">S3Bucket</a> function to create a bucket. This will ensure that the created S3 bucket follows the standard Mantil resource naming convention and that it will be cleaned up when the stage is destroyed.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="dynamodb">DynamoDB<a class="hash-link" href="#dynamodb" title="Direct link to heading">​</a></h2><p>Amazon DynamoDB is a fully managed, serverless, key-value NoSQL database designed to run high-performance applications at any scale.</p><p>Compared to other NoSQL solutions like MongoDB, DynamoDB is more suited for serverless workloads since it:</p><ul><li>is not connection-based and offers a HTTP interface instead. This means that you don&#x27;t have to worry about managing connection pools and cleaning up dead connections.</li><li>scales seamlessly, meaning you don&#x27;t have to worry about operational concerns such as hardware provisioning, setup/configuration, throughput capacity planning, replication, software patching, or cluster scaling.</li><li>has a pay-per-use pricing model.</li></ul><p>However, depending on your specific use case there are some potential downsides to consider:</p><ul><li>less flexibility when querying data. If you can&#x27;t anticipate how your data will be accessed in advance, DynamoDB might not be a good choice.</li><li>it has a steep learning curve for modelling data, especially when coming from a SQL background.</li></ul><p>For simple use cases, Mantil offers a <a href="https://github.com/mantil-io/mantil.go/blob/845476e8b2dae9333158fab6a48c7779423841a9/kv.go#L32" target="_blank" rel="noopener noreferrer">KV store</a> implementation backed by DynamoDB. This is used in some of our templates, such as: <a href="https://github.com/mantil-io/template-todo" target="_blank" rel="noopener noreferrer">todo</a> and <a href="https://github.com/mantil-io/template-chat" target="_blank" rel="noopener noreferrer">chat</a>.</p><p>For more complex use cases you can create a DynamoDB table by importing <a href="https://github.com/mantil-io/mantil.go" target="_blank" rel="noopener noreferrer">mantil.go</a> and using the <a href="https://github.com/mantil-io/mantil.go/blob/845476e8b2dae9333158fab6a48c7779423841a9/dynamo.go#L49" target="_blank" rel="noopener noreferrer">DynamodbTable</a> function. This will ensure that the created table follows the standard Mantil resource naming convention and that it will be cleaned up when the stage is destroyed.</p><p>As a quick example, you can create a Mantil project with an API named <code>dynamo</code> using the following code:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">package dynamo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;context&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;github.com/aws/aws-sdk-go-v2/aws&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;github.com/aws/aws-sdk-go-v2/feature/dynamodb/attributevalue&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;github.com/aws/aws-sdk-go-v2/service/dynamodb&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;github.com/aws/aws-sdk-go-v2/service/dynamodb/types&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;github.com/mantil-io/mantil.go&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">const (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tableName  = &quot;table&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    partition  = &quot;partition&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    primaryKey = &quot;pk&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sortKey    = &quot;sk&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type Dynamo struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    client            *dynamodb.Client</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tableResourceName string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">func New() *Dynamo {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    d := &amp;Dynamo{}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    c, _ := mantil.DynamodbTable(tableName, primaryKey, sortKey)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    d.client = c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    d.tableResourceName = mantil.Resource(tableName).Name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type Item struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ID   string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Name string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">func (d *Dynamo) Put(ctx context.Context, i *Item) error {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    av, err := attributevalue.MarshalMap(i)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if err != nil {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    av[primaryKey] = &amp;types.AttributeValueMemberS{Value: partition}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    av[sortKey] = &amp;types.AttributeValueMemberS{Value: i.ID}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    input := &amp;dynamodb.PutItemInput{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        TableName: aws.String(d.tableResourceName),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Item:      av,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _, err = d.client.PutItem(context.TODO(), input)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">func (d *Dynamo) Get(key string) (*Item, error) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    input := &amp;dynamodb.GetItemInput{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Key: map[string]types.AttributeValue{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            primaryKey: &amp;types.AttributeValueMemberS{Value: partition},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sortKey:    &amp;types.AttributeValueMemberS{Value: key},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        TableName: aws.String(d.tableResourceName),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    result, err := d.client.GetItem(context.TODO(), input)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if err != nil {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return nil, err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    var item Item</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if err := attributevalue.UnmarshalMap(result.Item, &amp;item); err != nil {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return nil, err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return &amp;item, nil</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>After deploying this you can for example run:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">mantil invoke dynamo/put -d &#x27;{&quot;id&quot;: &quot;item1&quot;, &quot;name&quot;: &quot;name1&quot;}&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>and then</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">mantil invoke dynamo/get -d &quot;item1&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>which will return</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;ID&quot;: &quot;item1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;Name&quot;: &quot;name1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>For more complicated use cases and information about DynamoDB, please refer to the official <a href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Introduction.html" target="_blank" rel="noopener noreferrer">developer guide</a> and the <a href="https://pkg.go.dev/github.com/aws/aws-sdk-go-v2/service/dynamodb" target="_blank" rel="noopener noreferrer">DynamoDB SDK docs for Go</a>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="relational-databases">Relational Databases<a class="hash-link" href="#relational-databases" title="Direct link to heading">​</a></h2><p>Relational databases are often the first choice for developers. They make data modelling easier since most data fits nicely in a relational model. They also allow for more flexible data access patterns which means that you don&#x27;t have to anticipate how your data will be accessed in advance. Scalability is also usually not an issue since sharding and read replicas can go a long way. There are also plenty of fully managed RDBMS solutions like Amazon&#x27;s RDS and Aurora services.</p><p>However, when trying to fit relational databases into a serverless workflow you might run into some issues:</p><ul><li>they are usually connection-based, which can be an issue when using them with lambda functions as they can create a large number of connections during usage peaks. This will cause slowdowns since relational databases are usually designed to support a limited number of persistent connections. You can mitigate this by implementing a connection pooling solution or using a managed database proxy like <a href="https://aws.amazon.com/rds/proxy/" target="_blank" rel="noopener noreferrer">RDS Proxy</a> which will handle connection management, security and reduce failover times.</li><li>they don&#x27;t offer a pay-per-use billing model, instead you will usually pay an hourly rate based on instance size</li></ul><p>One option worth mentioning here is <a href="https://aws.amazon.com/rds/aurora/serverless/" target="_blank" rel="noopener noreferrer">Aurora Serverless</a> which is Amazon&#x27;s serverless offering for their MySQL and PostgreSQL-compatible database <a href="https://aws.amazon.com/rds/aurora/" target="_blank" rel="noopener noreferrer">Aurora</a>. It offers an HTTP-based <a href="https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/data-api.html" target="_blank" rel="noopener noreferrer">Data API</a> which doesn&#x27;t require a persistent connection. It also scales capacity automatically which can reduce costs if database usage is unpredictable. There is however a minimum number of capacity units that need to be provisioned at all times which means that even if the database is not used there will be a minimum hourly cost.</p><p>A preview for <a href="https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/aurora-serverless-2.html" target="_blank" rel="noopener noreferrer">Aurora Serverless v2</a> is also currently available offering faster and more granular scaling. However, it is still missing some features such as PostgreSQL and Data API support.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="other-nosql-databases">Other NoSQL Databases<a class="hash-link" href="#other-nosql-databases" title="Direct link to heading">​</a></h2><p>While DynamoDB is probably the best fit for serverless applications in most cases, there are also other popular NoSQL options like MongoDB and Amazon&#x27;s DocumentDB which is MongoDB-compatible. They usually have less of a learning curve than DynamoDB, but they share the same issues as relational databases, namely being connection-based and not offering a pay-per-use pricing model.</p><p>Connection management is even more of an issue here as there are no managed proxy solutions available like RDS Proxy. Taking MongoDB as an example, there are some <a href="https://docs.atlas.mongodb.com/best-practices-connecting-from-aws-lambda/" target="_blank" rel="noopener noreferrer">best practices</a> you can follow when connecting from a lambda function. You could also implement your own proxy solution as described in <a href="https://www.webiny.com/blog/using-aws-lambda-to-create-a-mongodb-connection-proxy-2bb53c4a0af4" target="_blank" rel="noopener noreferrer">this article</a>.</p><p>Another option to keep an eye out for is MongoDB&#x27;s new <a href="https://www.mongodb.com/cloud/atlas/serverless" target="_blank" rel="noopener noreferrer">serverless offering</a> which is currently in preview. Along with seamless auto-scaling it offers a pay-per-use pricing model based on the number of operations performed on the database and data storage/transfer.</p><p align="right"> <a href="https://github.com/mantil-io/mantil/tree/master/docs#mantil-documentation" target="_blank" rel="noopener noreferrer">↵ Back to Documentation Home!</a></p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/Usage/api"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Using a Mantil API</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/Usage/testing"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Testing in Mantil Project</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#s3" class="table-of-contents__link toc-highlight">S3</a></li><li><a href="#dynamodb" class="table-of-contents__link toc-highlight">DynamoDB</a></li><li><a href="#relational-databases" class="table-of-contents__link toc-highlight">Relational Databases</a></li><li><a href="#other-nosql-databases" class="table-of-contents__link toc-highlight">Other NoSQL Databases</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://join.slack.com/t/mantilcommunity/shared_invite/zt-z3iy0lsn-7zD_6nqEucsgygTvHmnxAw" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/MantilDev" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Mantil, Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.2096478b.js"></script>
<script src="/assets/js/main.a27016fa.js"></script>
</body>
</html>